# 📖 Dayvive Project – 통합 문서 (v0.9 / 9일차 기준)

## 🎮 게임 개요

- **게임명**: Dayvive (Day + Survive)
- **장르**: 라이트 캐주얼 생존 (탑다운 뷰, 싱글플레이)
- **플랫폼**: 모바일(Android/iOS), PC(확장 고려)
- **세션 구조**: 1세션 = 1일 (15~30초)
- **핵심 목표**: *“며칠이나 버틸 수 있는가?”*

---

## 🕹 코어 루프

1. **인게임(필드)**
    - 플레이어 조작: 가상 조이스틱 / WASD
    - 모드 전환: Space (채굴 ↔ 전투)
    - 자원 채굴, 좀비 회피 및 전투
2. **엔드 패널**
    - 하루 종료 → 자원 결과 요약
3. **아웃게임**
    - 자원 소비: 회복, 무기 업그레이드, 제작, 건물 건설
    - 다음 날 준비 후 진입

---

## 👤 플레이어

- **조작**
    - 이동: 조이스틱 / WASD
    - 모드 전환: Space
    - 리로드: R
    - 사격: 마우스 좌클릭 (탑뷰 슈터)
- **모드**
    - 채굴 모드: RangeRing, DwellIndicator 표시 → 정지 + 채굴 대상 범위 내 → 채굴
    - 전투 모드: CombatUI (사거리 라인, 탄약 표시), 마우스 조준 및 발사
- **상태**
    - HP, 감염 게이지
    - 상태이상: 출혈, 감염, 탈수 등 (확률 조건부 발동)
    - 회복약/치료제 등으로 해소

---

## ⚒ 채굴 시스템

- **조건**
    1. 정지 상태
    2. 채굴 대상 범위 내 존재
- **UI**
    - RangeRing: 채굴 범위
    - DwellIndicator: 채굴 준비 게이지
- **대상**
    - 폐허 도시 자원 (금속, 약품 상자, 건물 잔해 등)
- **성과**
    - 자원 획득 → 엔드 패널 표시
- **확률 이벤트**
    - 채굴 소리 → 좀비 어그로
    - 상태이상 발동 (먼지, 독가스)

---

## 🔫 전투 시스템

- **무기**
    - 권총 (기본): 6발, 수동 리로드 필요
    - 샷건: 근거리 원뿔
    - 소총: 중·장거리
- **탄약**
    - 자원 채집으로 획득
    - 0발 시 사격 불가 → 회색 에임 가이드
- **UI**
    - CombatUI: 사거리 라인, 무기별 패턴 표시
- **좀비 AI**
    - 시야: 리소스에 가려짐
    - 소리 반응: 채굴/사격 시 어그로
    - 파라미터: HP, 공격력, 감염 능력

---

## 🧟 적 & 위협

- 좀비: 느린 보행자, 돌진자, 변종 등
- 위협 요소
    - 감염 확률: 일정 시간 내 치료 필요
    - 상태이상: 폐허 환경(질식, 중독 등)
- 위기 관리
    - 아웃게임에서 회복/치료제 제작 가능
    - 연구 시설 확장 시 난이도 완화

---

## 🏠 아웃게임

- **기본 기능**
    - 자원 소비 → 생존일 연장
    - HP/상태 회복
    - 무기 업그레이드 (장전 속도, 사거리, 탄창 크기)
    - 자원 가공 (총알, 치료제 제작)
    - 건물 건설 (연구소, 방어 구조물 등)
- **성장 구조**
    - 초반: 단순 생존
    - 후반: 제작·건설 중심

---

## 📊 UI / UX

- Mining 모드: RangeRing, DwellIndicator
- Combat 모드: CombatUI (사거리 라인, 탄약)
- 엔드 패널: 자원 요약
- HUD: HP, 상태이상, 감염 게이지, 탄약 카운트

---

## 🗂 하이어라키 구조 (예시 / 9일차 기준)

```
SampleScene
├─ Main Camera
├─ SpawnArea
├─ StageController
├─ Player
│ ├─ Cursor
│ ├─ Sensor
│ ├─ CombatUI
│ │ └─ Canvas
│ │ └─ AmmoText
│ └─ MinigUI
│ ├─ RangeRing
│ └─ DwellIndicator
├─ DayTimer
├─ Canvas
│ └─ SafeArea
│ ├─ TopBar
│ │ └─ TimerText
│ ├─ BottomBar
│ └─ CenterStage
│ └─ EndPanel
│ ├─ SummaryText
│ └─ NextDayButton
│ └─ Text (TMP)
├─ EventSystem
├─ RunInventory
└─ StageHooks

```

---

## 💻 주요 스크립트 요약

- **PlayerMode.cs** → Mining/Combat 전환 관리
- **MiningSystem.cs** → 채굴 조건(정지 + 범위), 자원 채굴 Tick 처리
- **DwellIndicator.cs** → 채굴 준비 게이지 UI
- **RangeVisualizer.cs** → 채굴 범위 원 시각화
- **CombatShooter.cs** → 발사, 리로드, 쿨다운, Projectile 생성
- **CombatAmmo.cs** → 탄약 관리 (소모, 장전)
- **CombatAimGuide.cs** → 사거리 라인 표시, 모드별 표시
- **Projectile.cs** → 총알 이동, 충돌 감지, 사거리 내 삭제
- **QuickFade.cs** → 히트 이펙트 등 임시 페이드아웃

---

## 🔄 개발 진행 현황 (9일차)

- [x]  Player 이동 (조이스틱 / WASD)
- [x]  Player 모드 전환 (Mining/Combat)
- [x]  RangeRing / DwellIndicator 정상 동작
- [x]  Combat 모드에서 채굴 차단
- [x]  DwellIndicator 머티리얼/색상 수정
- [x]  CombatUI 에임 가이드 표시
- [x]  무기 발사 & 리로드 시스템
- [x]  Projectile 발사 구현 (속도, 사거리, 충돌 판정)
- [x]  QuickFade 히트 이펙트 기본 적용
- [ ]  데미지 분기 (적 vs 채굴 대상 분리)
- [ ]  총기 데이터 분리 (무기별 파라미터)
- [ ]  엔드 패널 개선